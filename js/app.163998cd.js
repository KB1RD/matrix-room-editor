(function(e){function t(t){for(var r,i,c=t[0],s=t[1],u=t[2],d=0,f=[];d<c.length;d++)i=c[d],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&f.push(o[i][0]),o[i]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);l&&l(t);while(f.length)f.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,c=1;c<n.length;c++){var s=n[c];0!==o[s]&&(r=!1)}r&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},o={app:0},a=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var l=s;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var r=n("85ec"),o=n.n(r);o.a},"0adc":function(e,t,n){},"1e7b":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("a4d3"),n("e01a"),n("a623"),n("4160"),n("d81d"),n("b64b"),n("d3b7"),n("159b");var r=n("3835"),o=n("2909"),a=n("ade3"),i=(n("96cf"),n("1da1")),c=n("668b"),s=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("2b0e")),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},l=[],d=(n("034f"),n("2877")),f={},p=Object(d["a"])(f,u,l,!1,null,null,null),v=p.exports,h=n("9483");Object(h["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var b=n("8c4f"),m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",[e._v("Matrix Room Editor")]),n("p",[e._v("A Matrix App that edits room state and sends custom events")]),n("p",[e._v("Add to Matrix Apps: "),n("code",[e._v(e._s(e.url))])])])},g=[],_={computed:{url:function(){return"".concat(window.location.origin,"/manifest.mxapp.json")}}},y=_,w=Object(d["a"])(y,m,g,!1,null,null,null),x=w.exports,k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{"max-width":"1000px",margin:"auto"}},[n("h1",[e._v("Matrix Room Editor")]),e.state.error?n("b-card-text",[e._v(" Failed to start core. Make sure your browser can support either service or shared workers and ensure that you have "),n("code",[e._v("iframe")]),e._v("s enabled. ")]):e.state.context?n("b-card-text",[n("router-view")],1):n("b-card-text",[n("b-spinner",{staticStyle:{width:"3rem",height:"3rem"},attrs:{variant:"primary",label:"Starting core..."}}),n("br"),e.loadingissue?n("div",[n("p",[e._v("Not loading?")]),n("small",[e._v(" This load process required the use of "),n("code",[e._v("iframe")]),e._v("s to establish a communication channel. Ensure that they are enabled in your browser. ")])]):e._e()],1),n("b-embed",{staticClass:"bs-iframe",attrs:{type:"iframe",src:e.url}})],1)},O=[],j=n("f6d2"),E={error:void 0,context:void 0,port:void 0,channel:void 0};function S(){E.channel=new j["RpcChannel"]((function(e,t){return E.port.postMessage(e,t)})),E.port.onmessage=function(e){return E.channel.receive(e.data)},console.log("Set up RPC channel")}function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=function t(n){var r=n.data;if("ctx"===r[0])try{if(r[1]){if(console.log("Received channel setup result"),!e.every((function(e){return r[1].context[e]})))throw new TypeError("Missing required fields in context");E.context=r[1].context,E.port=r[1].port,S(),window.removeEventListener("message",t)}else if(r[2])throw Object.assign(new Error,r[2])}catch(o){console.error("Received channel setup error",o),E.error=o,window.removeEventListener("message",t)}};window.addEventListener("message",t)}var R={data:function(){return{url:"",state:E,loadingissue:!1}},created:function(){this.url=this.$route.query.return_via,this.$route.query.return_via=void 0,C(["account_id","app_url","room_id"])},mounted:function(){var e=this;setTimeout((function(){return e.loadingissue=!0}),3e3)}},$=R,A=(n("d918"),Object(d["a"])($,k,O,!1,null,null,null)),I=A.exports,T=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-card",{attrs:{"bg-variant":"light"},scopedSlots:e._u([e.loading?null:{key:"header",fn:function(){return[n("div",{staticClass:"spaced-bar d-flex flex-row align-items-center"},[n("b-avatar",{attrs:{variant:"secondary",src:e.room.avatar_url,icon:"file-earmark"}}),n("AssignInputField",{attrs:{value:e.room.name,size:"lg",disabled:"",placeholder:"Untitled Room"}})],1)]},proxy:!0}],null,!0)},[e.loading?n("b-spinner",{staticStyle:{width:"3rem",height:"3rem"},attrs:{variant:"primary",label:"Starting core..."}}):e._e(),e.loading?e._e():[n("p",{staticClass:"attrib-header"},[n("b-badge",[e._v(e._s(e.room.id))]),e.room.canon_alias?n("b-badge",{attrs:{variant:"primary"}},[e._v(" "+e._s(e.room.canon_alias)+" ")]):e._e(),e.room.type?n("b-badge",{attrs:{variant:"success"}},[e._v(" "+e._s(e.room.type)+" ")]):e._e()],1),n("small",{staticClass:"text-muted"},[e._v(" The ability to edit state will be added soon! ")])]],2)},M=[],P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("b-input-group",[n("b-form-input",{staticClass:"input-text-unless-focus",attrs:{size:e.size,placeholder:e.placeholder,disabled:e.disabled},on:{blur:function(e){return e.target.focus()},keyup:e.onTitleInputKeyEvent},model:{value:e.internal,callback:function(t){e.internal=t},expression:"internal"}}),e.internal!==e.value?n("b-input-group-append",[n("b-button",{attrs:{variant:"success"},on:{click:function(t){return e.onTitleChangeRequested()}}},[n("BIconCheck")],1),n("b-button",{attrs:{variant:"danger"},on:{click:function(){return e.internal=e.value}}},[n("BIconX")],1)],1):e._e()],1)},q=[],B=n("7386"),F={components:{BIconCheck:B["d"],BIconX:B["t"]},props:{value:String,placeholder:String,size:String,disabled:Boolean},data:function(){return{internal:""}},watch:{value:function(){this.internal=this.value}},mounted:function(){this.internal=this.value},methods:{onTitleChangeRequested:function(){this.$emit("input",this.internal)},onTitleInputKeyEvent:function(e){switch(e.keyCode){case 13:this.onTitleChangeRequested(),e.target.blur();break;case 27:e.target.blur();break}}}},N=F,L=Object(d["a"])(N,P,q,!1,null,null,null),z=L.exports,D={components:{AssignInputField:z},genbind:{room:{apply:["account_id","context"],address:function(e,t){var n=t.room_id;return["net","kb1rd","mxbindings","v0",e,"room",n,"listenDetails"]},default:"LOADING"}},data:function(){return{context:E.context}},computed:{account_id:function(){return this.context.account_id},app_url:function(){return this.context.app_url},room_id:function(){return this.context.room_id},loading:function(){return"LOADING"===this.room}}},G=D,J=(n("5815"),Object(d["a"])(G,T,M,!1,null,"cb2e592c",null)),K=J.exports;n("f9e3"),n("2dd8");s["default"].use(b["a"]);var X=[{path:"/",name:"Home",component:x},{path:"/app",name:"App",component:I,children:[{path:"",name:"Editor",component:K}]}],H=new b["a"]({routes:X}),U=H,Q=n("5f5b"),V=n("0759");s["default"].use(Q["a"]),s["default"].component("BIcon",V["a"]),s["default"].component("BIconFileEarmark",B["n"]),s["default"].config.productionTip=!1;var W=Symbol("ActiveRpcGenerators");s["default"].mixin({data:function(){var e={},t=this.$options.genbind;return t&&Object.keys(t).forEach((function(n){return e[n]=t[n].default})),e},methods:{$bind_generate:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:r;this[W]||(this[W]={}),this[W][e]&&this[W][e].shutdown(),this[e]=r;var s=E.channel.generate(t.map((function(e){return"".concat(e)})),n);this[W][e]={instance:s,address:t,default:r,shutdown:function(){return s.return(r)}};var u=this;Object(i["a"])(regeneratorRuntime.mark((function t(){var n,r,i,l,d,f,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.prev=0,n=!0,r=!1,t.prev=3,l=Object(c["a"])(s);case 5:return t.next=7,l.next();case 7:return d=t.sent,n=d.done,t.next=11,d.value;case 11:if(f=t.sent,n){t.next=18;break}p=f,Object.assign(u,Object(a["a"])({},e,p));case 15:n=!0,t.next=5;break;case 18:t.next=24;break;case 20:t.prev=20,t.t0=t["catch"](3),r=!0,i=t.t0;case 24:if(t.prev=24,t.prev=25,n||null==l.return){t.next=29;break}return t.next=29,l.return();case 29:if(t.prev=29,!r){t.next=32;break}throw i;case 32:return t.finish(29);case 33:return t.finish(24);case 34:t.next=40;break;case 36:t.prev=36,t.t1=t["catch"](0),console.warn("Caught error populating component RPC data",t.t1),Object.assign(u,Object(a["a"])({},e,o));case 40:case"end":return t.stop()}}),t,null,[[0,36],[3,20,24,34],[25,,29,33]])})))()}},created:function(){var e=this,t=this.$options.genbind;if(t){var n=function(t,n,r){var a;a="function"===typeof r.address?r.address.apply(r,Object(o["a"])((r.apply||[]).map((function(e){return t[e]})))):r.address;var i=function(e,t){return e.length===t.length&&e.every((function(e,n){return t[n]===e}))},c=t[W]&&t[W][n];c&&i(c.address,a)||e.$bind_generate(n,a,[],r.default,r.error||r.default)};Object.keys(t).map((function(e){return[e,t[e]]})).forEach((function(t){var o=Object(r["a"])(t,2),a=o[0],i=o[1];i.apply&&i.apply.length&&i.apply.forEach((function(t){e.$watch(t,(function(){return n(e,a,i)}))})),n(e,a,i)}))}},beforeDestroy:function(){var e=this[W];e&&Object.keys(e).forEach((function(t){return e[t].shutdown()}))}}),new s["default"]({router:U,render:function(e){return e(v)}}).$mount("#app")},5815:function(e,t,n){"use strict";var r=n("0adc"),o=n.n(r);o.a},"85ec":function(e,t,n){},d918:function(e,t,n){"use strict";var r=n("1e7b"),o=n.n(r);o.a}});
//# sourceMappingURL=app.163998cd.js.map